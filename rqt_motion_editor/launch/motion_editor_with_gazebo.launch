<?xml version="1.0"?>
<launch>
<!--  <arg name="robot_model" default="$(find atlas)/atlas.urdf"/>
  <param name="robot_description" textfile="$(arg robot_model)" />
  <param name="use_gui" value="True"/>-->

  <node name="motion_editor" pkg="vigir_rqt_motion_editor" type="motion_editor" respawn="true">
    <!-- currently remapping does not work with rqt: https://github.com/ros-visualization/rqt/pull/76 
    <remap from="/flor/torso_controller/trajectory" to="/flor/torso_controller/kinematic_trajectory" />
    <remap from="/flor/head_controller/trajectory" to="/flor/head_controller/kinematic_trajectory" />
    <remap from="/flor/l_arm_controller/trajectory" to="/flor/l_arm_controller/kinematic_trajectory" />
    <remap from="/flor/l_leg_controller/trajectory" to="/flor/l_leg_controller/kinematic_trajectory" />
    <remap from="/flor/r_arm_controller/trajectory" to="/flor/r_arm_controller/kinematic_trajectory" />
    <remap from="/flor/r_leg_controller/trajectory" to="/flor/r_leg_controller/kinematic_trajectory" /> -->
  </node>
  
  <node args="/atlas/joint_states /motion_editor/incoming_joint_states" name="joint_states_to_motion_editor" pkg="topic_tools" type="relay" />
  
  <!-- This launches the main controller node -->
  <include file="$(find flor_robot_controller)/launch/flor_sim_controller.launch">
    <arg name="launch_prefix" value=""/>
  </include>

  
  <node name="vigir_rqt_control_mode"        pkg="vigir_rqt_control_mode"        type="control_mode"         /> <!--  output="screen" launch-prefix="xterm -e" / -->
  <node name="vigir_rqt_joint_control"      pkg="vigir_rqt_joint_control"      type="joint_control"         /> <!--  output="screen" launch-prefix="xterm -e" / -->
  
  <!-- This launches the components affiliated with state estimation -->
  <include file="$(find vigir_state_estimation)/launch/state_estimation.launch"/>
  
  <!-- This launches the visualization node for displaying the MarkerArray with stability data -->
  <include file="$(find flor_visualization)/launch/flor_visualization_default.launch"/>
  
  <!--<node name="rviz" pkg="rviz" type="rviz" args="-d $(find flor_robot_tools)/rviz/xacrodisplay_default.rviz" respawn="true" />-->
  
</launch>
